<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .search-container {
            margin: 20px 0;
            position: relative;
        }
        .search-input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ccc;
            border-radius: 8px;
            outline: none;
        }
        .search-input:focus {
            border-color: #0a66c2;
        }
        .results {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            min-height: 100px;
        }
        .debug {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Search Test - No Page Reloads</h1>
    
    <div class="debug">
        <strong>Debug Info:</strong><br>
        <span id="debugInfo">Ready to test...</span>
    </div>
    
    <div class="search-container">
        <input type="text" class="search-input" id="searchInput" placeholder="Type here to test search...">
        <div id="searchStatus" style="margin-top: 10px; color: #666;"></div>
    </div>
    
    <div class="results" id="results">
        <p>Type in the search box above to see results here...</p>
    </div>

    <script>
        // Simple test without any complex functionality
        const searchInput = document.getElementById('searchInput');
        const results = document.getElementById('results');
        const searchStatus = document.getElementById('searchStatus');
        const debugInfo = document.getElementById('debugInfo');
        
        let searchTimeout;
        let inputCount = 0;
        
        // Update debug info
        function updateDebug(message) {
            debugInfo.textContent = message;
            console.log(message);
        }
        
        // Simple input handler
        searchInput.addEventListener('input', function(e) {
            inputCount++;
            const value = e.target.value;
            
            updateDebug(`Input event #${inputCount}: "${value}" (length: ${value.length})`);
            
            // Clear previous timeout
            clearTimeout(searchTimeout);
            
            if (value.length >= 2) {
                searchStatus.textContent = 'Searching...';
                
                // Simulate search delay
                searchTimeout = setTimeout(() => {
                    searchStatus.textContent = 'Search complete!';
                    results.innerHTML = `
                        <h3>Search Results for: "${value}"</h3>
                        <p>This is a test result. The page should NOT reload.</p>
                        <p>Input count: ${inputCount}</p>
                        <p>Current time: ${new Date().toLocaleTimeString()}</p>
                    `;
                }, 500);
            } else if (value.length === 0) {
                searchStatus.textContent = '';
                results.innerHTML = '<p>Type in the search box above to see results here...</p>';
            }
        });
        
        // Prevent any form submission
        document.addEventListener('submit', function(e) {
            e.preventDefault();
            updateDebug('Form submission prevented!');
            return false;
        });
        
        // Monitor page reloads
        window.addEventListener('beforeunload', function(e) {
            updateDebug('PAGE RELOAD DETECTED! This should not happen!');
            console.error('Page reload detected!');
            console.trace('Stack trace for reload');
        });
        
        // Focus the input
        searchInput.focus();
        updateDebug('Test page loaded. Start typing to test...');
    </script>
</body>
</html> 